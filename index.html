<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur de Vitesse, d'Allure et de Temps de Passage</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        input, button {
            margin: 5px 0;
            padding: 5px;
        }
        .time-input {
            width: 50px;
        }
        #resultat, #resultatPassage {
            margin-top: 20px;
            font-weight: bold;
        }
        hr {
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>Calculateur de Vitesse et d'Allure</h1>
    <div>
        <label for="distance">Distance (km) :</label>
        <input type="number" id="distance" step="0.01" min="0">
    </div>
    <div>
        <label>Temps :</label>
        <input type="number" id="heures" class="time-input" min="0" placeholder="h">
        <input type="number" id="minutes" class="time-input" min="0" max="59" placeholder="min">
        <input type="number" id="secondes" class="time-input" min="0" max="59" placeholder="sec">
    </div>
    <button onclick="calculer()">Calculer</button>
    <div id="resultat"></div>

    <hr>

    <h2>Calculateur de Temps de Passage</h2>
    <div>
        <label>Allure (min/km) :</label>
        <input type="number" id="allureMin" class="time-input" min="0" placeholder="min">
        <input type="number" id="allureSec" class="time-input" min="0" max="59" placeholder="sec">
    </div>
    <div>
        <label for="distancePassage">Distance (m) :</label>
        <input type="number" id="distancePassage" value="400" min="1">
    </div>
    <button onclick="calculerTempsPassage()">Calculer Temps de Passage</button>
    <div id="resultatPassage"></div>

    <script>
        function calculer() {
    const distance = parseFloat(document.getElementById('distance').value);
    const heures = parseInt(document.getElementById('heures').value) || 0;
    const minutes = parseInt(document.getElementById('minutes').value) || 0;
    const secondes = parseInt(document.getElementById('secondes').value) || 0;
    const resultatDiv = document.getElementById('resultat');

    if (isNaN(distance) || distance <= 0 || (heures === 0 && minutes === 0 && secondes === 0)) {
        resultatDiv.innerHTML = "Veuillez entrer des valeurs valides.";
        return;
    }

    const tempsHeures = heures + minutes / 60 + secondes / 3600;
    const tempsMinutes = tempsHeures * 60;
    const vitesseKmh = distance / tempsHeures;
    const allureMinParKm = tempsMinutes / distance;

    const allureMinutes = Math.floor(allureMinParKm);
    const allureSecondes = Math.round((allureMinParKm - allureMinutes) * 60);

    // Calcul de l'allure en min/mile
    const kmParMile = 1.60934;
    const allureMinParMile = allureMinParKm * kmParMile;
    const allureMinutesMile = Math.floor(allureMinParMile);
    const allureSecondesMile = Math.round((allureMinParMile - allureMinutesMile) * 60);

    resultatDiv.innerHTML = `
        Vitesse moyenne : ${vitesseKmh.toFixed(2)} km/h<br>
        Allure : ${allureMinutes}'${allureSecondes.toString().padStart(2, '0')}/km<br>
        Allure : ${allureMinutesMile}'${allureSecondesMile.toString().padStart(2, '0')}/mile
    `;

    // Mise à jour des champs d'allure du calculateur de temps de passage
    document.getElementById('allureMin').value = allureMinutes;
    document.getElementById('allureSec').value = allureSecondes;

    // Calcul automatique du temps de passage au 400m
    document.getElementById('distancePassage').value = 400;
    calculerTempsPassage();
}

function calculerTempsPassage() {
    const allureMin = parseInt(document.getElementById('allureMin').value) || 0;
    const allureSec = parseInt(document.getElementById('allureSec').value) || 0;
    const distancePassage = parseFloat(document.getElementById('distancePassage').value) || 400;
    const resultatPassageDiv = document.getElementById('resultatPassage');

    if (allureMin === 0 && allureSec === 0) {
        resultatPassageDiv.innerHTML = "Veuillez entrer une allure valide.";
        return;
    }

    // Convertir l'allure en secondes par kilomètre
    const allureSecondesParKm = allureMin * 60 + allureSec;
    
    // Calculer le temps de passage en secondes
    const tempsPassageSecondes = (allureSecondesParKm * distancePassage) / 1000;
    
    // Convertir en minutes et secondes
    const tempsPassageMin = Math.floor(tempsPassageSecondes / 60);
    const tempsPassageSec = Math.round(tempsPassageSecondes % 60);

    resultatPassageDiv.innerHTML = `
        Temps de passage pour ${distancePassage}m : 
        ${tempsPassageMin}'${tempsPassageSec.toString().padStart(2, '0')}
    `;
}


    </script>
</body>
</html>
